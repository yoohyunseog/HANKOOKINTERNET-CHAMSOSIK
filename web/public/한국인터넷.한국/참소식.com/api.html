<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- 도메인 검증 (모든 페이지에서 가장 먼저 실행되어야 함) -->
    <script src="../domain-check.js"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API 사용 가이드 - N/B 계산 데이터베이스</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 2rem;
        }
        .card-header {
            border-radius: 15px 15px 0 0 !important;
            font-weight: 600;
            font-size: 1.2rem;
        }
        .endpoint {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border-left: 4px solid #667eea;
        }
        .method-badge {
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
        }
        .method-post {
            background: #28a745;
            color: white;
        }
        .method-get {
            background: #007bff;
            color: white;
        }
        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
        }
        .nav-pills .nav-link {
            color: #667eea;
            font-weight: 500;
        }
        .nav-pills .nav-link.active {
            background-color: #667eea;
        }
        .response-example {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        h1, h2, h3 {
            color: white;
        }
        .badge-custom {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }
        .table-api {
            background: white;
        }
        .table-api th {
            background: #f8f9fa;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="text-center mb-4">
            <h1 class="display-4 fw-bold mb-2">
                <i class="bi bi-code-slash"></i> API 사용 가이드
            </h1>
            <p class="lead text-white">N/B 계산 데이터베이스 REST API 완벽 가이드</p>
            <div class="mb-3">
                <a href="index.html" class="btn btn-outline-light me-2">
                    <i class="bi bi-house"></i> 홈
                </a>
                <a href="database.html" class="btn btn-outline-light">
                    <i class="bi bi-database"></i> 데이터베이스
                </a>
            </div>
        </div>

        <!-- 빠른 시작 -->
        <div class="card">
            <div class="card-header bg-primary text-white">
                <i class="bi bi-lightning-charge"></i> 빠른 시작
            </div>
            <div class="card-body">
                <h5>Base URL</h5>
                <div class="code-block">
                    <button class="btn btn-sm btn-light copy-btn" onclick="copyToClipboard(this, 'https://xn--9l4b4xi9r.com/api')">
                        <i class="bi bi-clipboard"></i>
                    </button>
                    <code>https://xn--9l4b4xi9r.com/api</code>
                </div>

                <h5 class="mt-4">인증</h5>
                <p>현재 인증이 필요하지 않습니다. 모든 API는 공개되어 있습니다.</p>

                <h5 class="mt-4">Content-Type</h5>
                <div class="code-block">
                    <code>Content-Type: application/json</code>
                </div>
            </div>
        </div>

        <!-- API 엔드포인트 목록 -->
        <div class="card">
            <div class="card-header bg-success text-white">
                <i class="bi bi-list-ul"></i> API 엔드포인트 목록
            </div>
            <div class="card-body">
                <table class="table table-api table-hover">
                    <thead>
                        <tr>
                            <th>메서드</th>
                            <th>엔드포인트</th>
                            <th>설명</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge method-post">POST</span></td>
                            <td><code>/api/calculate</code></td>
                            <td>새로운 N/B 계산 실행 및 저장</td>
                        </tr>
                        <tr>
                            <td><span class="badge method-post">POST</span></td>
                            <td><code>/api/search</code></td>
                            <td>텍스트 또는 유니코드로 검색</td>
                        </tr>
                        <tr>
                            <td><span class="badge method-get">GET</span></td>
                            <td><code>/api/calculation/:id</code></td>
                            <td>ID로 단일 조회 (조회수 증가)</td>
                        </tr>
                        <tr>
                            <td><span class="badge method-get">GET</span></td>
                            <td><code>/api/calculations</code></td>
                            <td>리스트 조회 (페이징)</td>
                        </tr>
                        <tr>
                            <td><span class="badge method-get">GET</span></td>
                            <td><code>/api/recent</code></td>
                            <td>최근 계산 결과 조회 (날짜순)</td>
                        </tr>
                        <tr>
                            <td><span class="badge method-get">GET</span></td>
                            <td><code>/api/most-viewed</code></td>
                            <td>조회수 많은 순 조회 <span class="badge bg-success">NEW</span></td>
                        </tr>
                        <tr>
                            <td><span class="badge method-get">GET</span></td>
                            <td><code>/api/stats</code></td>
                            <td>통계 정보 조회</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 1. 계산 API -->
        <div class="card">
            <div class="card-header bg-info text-white">
                <i class="bi bi-calculator"></i> 1. 계산 및 저장 API
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-post">POST</span>
                    <code class="ms-2 fs-5">/api/calculate</code>
                </div>

                <h5>설명</h5>
                <p>텍스트 또는 숫자 배열을 N/B 계산하고 데이터베이스에 자동 저장합니다.</p>

                <h5>요청 본문 (텍스트)</h5>
                <ul class="nav nav-pills mb-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="pill" href="#calc-js">JavaScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#calc-ps">PowerShell</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#calc-curl">cURL</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="calc-js">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">const response = await fetch('/api/calculate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        input: "안녕하세요",
        bit: 999
    })
});
const result = await response.json();
console.log('ID:', result.calculation_id);
console.log('조회수:', result.view_count); // 0</pre>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="calc-ps">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">$body = '{"input":"안녕하세요","bit":999}'
$result = Invoke-RestMethod `
    -Uri "https://xn--9l4b4xi9r.com/api/calculate" `
    -Method Post `
    -Body $body `
    -ContentType "application/json"

Write-Host "ID: $($result.calculation_id)"
Write-Host "조회수: $($result.view_count)"</pre>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="calc-curl">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">curl -X POST https://xn--9l4b4xi9r.com/api/calculate \
  -H "Content-Type: application/json" \
  -d '{"input":"안녕하세요","bit":999}'</pre>
                        </div>
                    </div>
                </div>

                <h5 class="mt-4">요청 파라미터</h5>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>파라미터</th>
                            <th>타입</th>
                            <th>필수</th>
                            <th>설명</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>input</code></td>
                            <td>string | array</td>
                            <td>✅</td>
                            <td>계산할 텍스트 또는 숫자 배열</td>
                        </tr>
                        <tr>
                            <td><code>bit</code></td>
                            <td>number</td>
                            <td>❌</td>
                            <td>비트 값 (기본값: 999)</td>
                        </tr>
                    </tbody>
                </table>

                <h5 class="mt-4">응답 예시</h5>
                <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">{
  "id": "a2ef74b40807f4c1",
  "timestamp": "2026-02-18T10:16:54.067Z",
  "type": "text",
  "input": "안녕하세요",
  "unicode": [50504, 45397, 54616, 49464, 50836],
  "bit": 999,
  "view_count": 0,
  "results": [{
    "calculation": 1,
    "nb_max": 12002.3230102511,
    "nb_min": 1.1290060488,
    "difference": 12001.1940042023
  }],
  "saved": true,
  "calculation_id": "a2ef74b40807f4c1"
}</pre>
                </div>
            </div>
        </div>

        <!-- 2. 단일 조회 API -->
        <div class="card">
            <div class="card-header bg-warning text-dark">
                <i class="bi bi-search"></i> 2. 단일 조회 API (조회수 증가)
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-get">GET</span>
                    <code class="ms-2 fs-5">/api/calculation/:id</code>
                </div>

                <div class="alert alert-info">
                    <i class="bi bi-info-circle"></i> <strong>중요:</strong> 이 API를 호출할 때마다 <code>view_count</code>가 자동으로 증가합니다!
                </div>

                <h5>사용 예제</h5>
                <ul class="nav nav-pills mb-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="pill" href="#get-js">JavaScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#get-ps">PowerShell</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="get-js">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">const id = "a2ef74b40807f4c1";
const response = await fetch(`/api/calculation/${id}`);
const data = await response.json();

console.log('조회수:', data.result.view_count);
console.log('마지막 조회:', data.result.last_viewed);</pre>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="get-ps">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">$id = "a2ef74b40807f4c1"
$r = Invoke-RestMethod -Uri "https://xn--9l4b4xi9r.com/api/calculation/$id"
Write-Host "조회수: $($r.result.view_count)"</pre>
                        </div>
                    </div>
                </div>

                <h5 class="mt-4">응답 예시</h5>
                <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">{
  "result": {
    "id": "a2ef74b40807f4c1",
    "view_count": 6,
    "last_viewed": "2026-02-18T10:17:28.733Z",
    ...
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- 3. 검색 API -->
        <div class="card">
            <div class="card-header bg-primary text-white">
                <i class="bi bi-zoom-in"></i> 3. 검색 API
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-post">POST</span>
                    <code class="ms-2 fs-5">/api/search</code>
                </div>

                <h5>텍스트로 검색</h5>
                <div class="code-block">
                    <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                        <i class="bi bi-clipboard"></i>
                    </button>
<pre style="margin: 0; color: #f8f8f2;">const response = await fetch('/api/search', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        text: "안녕하세요"
    })
});
const data = await response.json();
console.log('검색 결과:', data.results);</pre>
                </div>

                <h5 class="mt-4">유니코드 배열로 검색</h5>
                <div class="code-block">
                    <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                        <i class="bi bi-clipboard"></i>
                    </button>
<pre style="margin: 0; color: #f8f8f2;">const response = await fetch('/api/search', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        unicode: [50504, 45397, 54616, 49464, 50836]
    })
});
const data = await response.json();</pre>
                </div>
            </div>
        </div>

        <!-- 4. 리스트 조회 API -->
        <div class="card">
            <div class="card-header bg-success text-white">
                <i class="bi bi-list-check"></i> 4. 리스트 조회 API
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-get">GET</span>
                    <code class="ms-2 fs-5">/api/calculations?limit=20</code>
                </div>

                <h5>사용 예제</h5>
                <div class="code-block">
                    <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                        <i class="bi bi-clipboard"></i>
                    </button>
<pre style="margin: 0; color: #f8f8f2;">// 최신 20개 조회
const response = await fetch('/api/calculations?limit=20');
const data = await response.json();

data.results.forEach(item => {
    console.log(`ID: ${item.id}, 조회수: ${item.view_count}`);
});</pre>
                </div>

                <h5 class="mt-4">쿼리 파라미터</h5>
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>파라미터</th>
                            <th>타입</th>
                            <th>기본값</th>
                            <th>설명</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>limit</code></td>
                            <td>number</td>
                            <td>20</td>
                            <td>조회할 결과 개수 (10, 20, 50, 100)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 5. 최근 계산 결과 API -->
        <div class="card">
            <div class="card-header bg-primary text-white">
                <i class="bi bi-clock-history"></i> 5. 최근 계산 결과 조회 (날짜순)
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-get">GET</span>
                    <code class="ms-2 fs-5">/api/recent?limit=100</code>
                </div>

                <h5>설명</h5>
                <p>가장 최근에 생성된 계산 결과를 날짜순으로 조회합니다. <code>limit</code> 파라미터로 개수를 지정할 수 있습니다.</p>

                <h5>파라미터</h5>
                <ul>
                    <li><code>limit</code> (선택): 조회할 개수 (기본값: 10, 최대 권장: 100)</li>
                </ul>

                <h5>사용 예제</h5>
                <ul class="nav nav-pills mb-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="pill" href="#recent-js">JavaScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#recent-ps">PowerShell</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#recent-curl">cURL</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="recent-js">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">// 최근 100개 조회
const response = await fetch('/api/recent?limit=100');
const data = await response.json();

console.log(`총 ${data.count}개 조회`);
data.results.forEach((item, index) => {
    console.log(`${index + 1}. ${item.id} - 생성: ${item.timestamp}`);
});</pre>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="recent-ps">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">$response = Invoke-RestMethod -Uri "https://참소식.com/api/recent?limit=100" -Method Get
Write-Host "총 $($response.count)개 조회"
$response.results | Select-Object id, timestamp | Format-Table</pre>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="recent-curl">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">curl "https://참소식.com/api/recent?limit=100"</pre>
                        </div>
                    </div>
                </div>

                <h5 class="mt-4">응답 예시</h5>
                <div class="response-example">
<pre style="margin: 0;">{
  "success": true,
  "count": 100,
  "results": [
    {
      "id": "abc123...",
      "timestamp": "2026-02-18T10:30:00.000Z",
      "type": "text",
      "input": "안녕하세요",
      "view_count": 5,
      ...
    }
  ]
}</pre>
                </div>
            </div>
        </div>

        <!-- 6. 조회수 많은 순 API -->
        <div class="card">
            <div class="card-header bg-danger text-white">
                <i class="bi bi-fire"></i> 6. 조회수 많은 순 조회 <span class="badge bg-light text-dark">NEW</span>
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-get">GET</span>
                    <code class="ms-2 fs-5">/api/most-viewed?limit=100</code>
                </div>

                <h5>설명</h5>
                <p>조회수가 가장 많은 계산 결과를 내림차순으로 조회합니다. 인기 있는 데이터를 확인할 때 유용합니다.</p>

                <h5>파라미터</h5>
                <ul>
                    <li><code>limit</code> (선택): 조회할 개수 (기본값: 10, 최대 권장: 100)</li>
                </ul>

                <h5>사용 예제</h5>
                <ul class="nav nav-pills mb-3" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="pill" href="#viewed-js">JavaScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#viewed-ps">PowerShell</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#viewed-curl">cURL</a>
                    </li>
                </ul>

                <div class="tab-content">
                    <div class="tab-pane fade show active" id="viewed-js">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">// 조회수 TOP 100
const response = await fetch('/api/most-viewed?limit=100');
const data = await response.json();

console.log(`총 ${data.count}개 조회`);
data.results.forEach((item, index) => {
    console.log(`${index + 1}위. ${item.id} - 조회수: ${item.view_count}회`);
});</pre>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="viewed-ps">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">$response = Invoke-RestMethod -Uri "https://참소식.com/api/most-viewed?limit=100" -Method Get
Write-Host "총 $($response.count)개 조회"
$response.results | Select-Object id, view_count, input | Format-Table</pre>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="viewed-curl">
                        <div class="code-block">
                            <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                                <i class="bi bi-clipboard"></i>
                            </button>
<pre style="margin: 0; color: #f8f8f2;">curl "https://참소식.com/api/most-viewed?limit=100"</pre>
                        </div>
                    </div>
                </div>

                <h5 class="mt-4">응답 예시</h5>
                <div class="response-example">
<pre style="margin: 0;">{
  "success": true,
  "count": 100,
  "results": [
    {
      "id": "xyz789...",
      "timestamp": "2026-02-15T14:20:00.000Z",
      "type": "number",
      "input": [5, 9, 6, 8],
      "view_count": 125,
      "last_viewed": "2026-02-18T09:15:00.000Z",
      ...
    }
  ]
}</pre>
                </div>

                <div class="alert alert-info mt-3">
                    <i class="bi bi-info-circle"></i>
                    <strong>참고:</strong> 이 API는 모든 계산 파일을 읽어서 정렬하므로, 대량의 데이터가 있을 경우 응답 시간이 길어질 수 있습니다.
                </div>
            </div>
        </div>

        <!-- 7. 통계 API -->
        <div class="card">
            <div class="card-header bg-secondary text-white">
                <i class="bi bi-graph-up"></i> 7. 통계 정보 API
            </div>
            <div class="card-body">
                <div class="endpoint">
                    <span class="method-badge method-get">GET</span>
                    <code class="ms-2 fs-5">/api/stats</code>
                </div>

                <h5>사용 예제</h5>
                <div class="code-block">
                    <button class="btn btn-sm btn-light copy-btn" onclick="copyCode(this)">
                        <i class="bi bi-clipboard"></i>
                    </button>
<pre style="margin: 0; color: #f8f8f2;">const response = await fetch('/api/stats');
const stats = await response.json();
console.log('전체 계산 수:', stats.stats.total_calculations);</pre>
                </div>

                <h5 class="mt-4">응답 예시</h5>
                <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">{
  "stats": {
    "total_calculations": 7,
    "total_max_results": 7,
    "total_min_results": 7
  }
}</pre>
                </div>
            </div>
        </div>

        <!-- 실시간 테스트 -->
        <div class="card">
            <div class="card-header bg-danger text-white">
                <i class="bi bi-play-circle"></i> 실시간 API 테스트
            </div>
            <div class="card-body">
                <p>브라우저 콘솔(F12)에서 바로 테스트해보세요:</p>
                
                <div class="code-block">
<pre style="margin: 0; color: #f8f8f2;">// 1. 새 계산 생성
const calc = await fetch('/api/calculate', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ input: "테스트", bit: 999 })
}).then(r => r.json());
console.log('생성된 ID:', calc.calculation_id);

// 2. ID로 조회 (조회수 증가)
const result = await fetch(`/api/calculation/${calc.calculation_id}`)
    .then(r => r.json());
console.log('조회수:', result.result.view_count);

// 3. 최근 100개 조회 (날짜순)
const recent = await fetch('/api/recent?limit=100').then(r => r.json());
console.log(`최근 ${recent.count}개:`, recent.results);

// 4. 조회수 TOP 100 (인기순)
const topViewed = await fetch('/api/most-viewed?limit=100').then(r => r.json());
console.log(`조회수 TOP ${topViewed.count}:`, topViewed.results);

// 5. 통계 확인
const stats = await fetch('/api/stats').then(r => r.json());
console.log('전체 계산 수:', stats.stats.total_calculations);</pre>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-4 mb-3">
            <p class="text-white">
                <i class="bi bi-github"></i> API 문의: 
                <a href="database.html" class="text-white text-decoration-underline">데이터베이스 페이지</a>
            </p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function copyToClipboard(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="bi bi-check"></i> 복사됨!';
                btn.classList.add('btn-success');
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.classList.remove('btn-success');
                }, 2000);
            });
        }

        function copyCode(btn) {
            const codeBlock = btn.parentElement;
            const code = codeBlock.querySelector('pre').textContent;
            navigator.clipboard.writeText(code).then(() => {
                const originalHTML = btn.innerHTML;
                btn.innerHTML = '<i class="bi bi-check"></i> 복사됨!';
                btn.classList.add('btn-success');
                setTimeout(() => {
                    btn.innerHTML = originalHTML;
                    btn.classList.remove('btn-success');
                }, 2000);
            });
        }
    </script>
</body>
</html>
